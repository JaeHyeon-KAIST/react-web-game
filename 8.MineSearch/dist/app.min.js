(()=>{"use strict";var e,t={307:(e,t,a)=>{var r=a(294),l=a(935);const n=e=>{switch(e){case d.NORMAL:case d.MINE:return{background:"#444"};case d.CLICKED_MINE:case d.OPENED:return{background:"white"};case d.QUESTION_MINE:case d.QUESTION:return{background:"yellow"};case d.FLAG_MINE:case d.FLAG:return{background:"red"};default:return{background:"white"}}},c=(0,r.memo)((e=>{let{rowIndex:t,cellIndex:a}=e;const{tableData:l,dispatch:n,halted:c}=(0,r.useContext)(N),u=(0,r.useCallback)((()=>{if(!c)switch(l[t][a]){case d.OPENED:case d.FLAG_MINE:case d.FLAG:case d.QUESTION_MINE:case d.QUESTION:return;case d.NORMAL:return void n({type:m,row:t,cell:a});case d.MINE:return void n({type:M,row:t,cell:a});default:return}}),[l[t][a],c]),s=(0,r.useCallback)((e=>{if(e.preventDefault(),!c)switch(l[t][a]){case d.NORMAL:case d.MINE:return void n({type:b,row:t,cell:a});case d.FLAG_MINE:case d.FLAG:return void n({type:w,row:t,cell:a});case d.QUESTION_MINE:case d.QUESTION:return void n({type:C,row:t,cell:a});default:return}}),[l[t][a],c]);return r.createElement(o,{onClickTd:u,onRightClickTd:s,data:l[t][a]})})),o=(0,r.memo)((e=>{let{onClickTd:t,onRightClickTd:a,data:l}=e;return r.createElement("td",{style:n(l),onClick:t,onContextMenu:a},(e=>{switch(e){case d.NORMAL:return"";case d.MINE:return"X";case d.CLICKED_MINE:return"펑";case d.FLAG_MINE:case d.FLAG:return"!";case d.QUESTION_MINE:case d.QUESTION:return"?";default:return e||""}})(l))})),u=c,s=(0,r.memo)((e=>{let{rowIndex:t}=e;const{tableData:a}=(0,r.useContext)(N);return r.createElement("tr",null,a[0]&&Array(a[0].length).fill().map(((e,a)=>r.createElement(u,{rowIndex:t,cellIndex:a}))))})),E=(0,r.memo)((()=>{const{tableData:e}=(0,r.useContext)(N);return r.createElement("table",null,Array(e.length).fill().map(((e,t)=>r.createElement(s,{rowIndex:t}))))})),i=(0,r.memo)((()=>{const[e,t]=(0,r.useState)(10),[a,l]=(0,r.useState)(10),[n,c]=(0,r.useState)(20),{dispatch:o}=(0,r.useContext)(N),u=(0,r.useCallback)((e=>{t(e.target.value)}),[]),s=(0,r.useCallback)((e=>{l(e.target.value)}),[]),E=(0,r.useCallback)((e=>{c(e.target.value)}),[]),i=(0,r.useCallback)((()=>{o({type:p,row:e,cell:a,mine:n})}),[e,a,n]);return r.createElement("div",null,r.createElement("input",{type:"number",placeholder:"세로",value:e,onChange:u}),r.createElement("input",{type:"number",placeholder:"가로",value:a,onChange:s}),r.createElement("input",{type:"number",placeholder:"지뢰",value:n,onChange:E}),r.createElement("button",{onClick:i},"시작"))})),d={MINE:-7,NORMAL:-1,QUESTION:-2,FLAG:-3,QUESTION_MINE:-4,FLAG_MINE:-5,CLICKED_MINE:-6,OPENED:0},N=(0,r.createContext)({tableData:[],halted:!0,dispatch:()=>{}}),h={tableData:[],data:{row:0,cell:0,mine:0},timer:0,result:"",halted:!0,openedCount:0},I=(e,t,a)=>{const r=Array(e*t).fill().map(((e,t)=>t)),l=[];for(;r.length>e*t-a;){const e=r.splice(Math.floor(Math.random()*r.length),1)[0];l.push(e)}const n=[];for(let a=0;a<e;a++){const e=[];n.push(e);for(let a=0;a<t;a++)e.push(d.NORMAL)}for(let e=0;e<l.length;e++){const a=Math.floor(l[e]/t),r=l[e]%t;n[a][r]=d.MINE}return n},p="START_GAME",m="OPEN_CELL",M="CLICK_MINE",b="FLAG_CELL",w="QUESTION_CELL",C="NORMALIZE_CELL",O="INCREMENT_TIMER",f=(e,t)=>{switch(t.type){case p:return{...e,data:{row:t.row,cell:t.cell,mine:t.mine},openedCount:0,tableData:I(t.row,t.cell,t.mine),halted:!1,timer:0};case m:{const a=[...e.tableData];a.forEach(((e,t)=>{a[t]=[...e]}));const r=[];let l=0;const n=(e,t)=>{if(e<0||e>=a.length||t<0||t>=a[0].length)return;if([d.OPENED,d.FLAG,d.FLAG_MINE,d.QUESTION_MINE,d.QUESTION].includes(a[e][t]))return;if(r.includes(e+"/"+t))return;r.push(e+"/"+t);let c=[a[e][t-1],a[e][t+1]];a[e-1]&&(c=c.concat([a[e-1][t-1],a[e-1][t],a[e-1][t+1]])),a[e+1]&&(c=c.concat([a[e+1][t-1],a[e+1][t],a[e+1][t+1]]));const o=c.filter((function(e){return[d.MINE,d.FLAG_MINE,d.QUESTION_MINE].includes(e)})).length;if(0===o&&e>-1){const r=[];e-1>-1&&(r.push([e-1,t-1]),r.push([e-1,t]),r.push([e-1,t+1])),r.push([e,t-1]),r.push([e,t+1]),e+1<a.length&&(r.push([e+1,t-1]),r.push([e+1,t]),r.push([e+1,t+1])),r.forEach((e=>{a[e[0]][e[1]]!==d.OPENED&&n(e[0],e[1])}))}a[e][t]===d.NORMAL&&(l+=1),a[e][t]=o};n(t.row,t.cell);let c=!1,o="";return e.data.row*e.data.cell-e.data.mine===e.openedCount+l&&(c=!0,o=`${e.timer}초만에 승리하셨습니다`),{...e,tableData:a,openedCount:e.openedCount+l,halted:c,result:o}}case M:{const a=[...e.tableData];return a[t.row]=[...e.tableData[t.row]],a[t.row][t.cell]=d.CLICKED_MINE,{...e,tableData:a,halted:!0}}case b:{const a=[...e.tableData];return a[t.row]=[...e.tableData[t.row]],a[t.row][t.cell]===d.MINE?a[t.row][t.cell]=d.FLAG_MINE:a[t.row][t.cell]=d.FLAG,{...e,tableData:a}}case w:{const a=[...e.tableData];return a[t.row]=[...e.tableData[t.row]],a[t.row][t.cell]===d.FLAG_MINE?a[t.row][t.cell]=d.QUESTION_MINE:a[t.row][t.cell]=d.QUESTION,{...e,tableData:a}}case C:{const a=[...e.tableData];return a[t.row]=[...e.tableData[t.row]],a[t.row][t.cell]===d.QUESTION_MINE?a[t.row][t.cell]=d.MINE:a[t.row][t.cell]=d.NORMAL,{...e,tableData:a}}case O:return{...e,timer:e.timer+1};default:return e}},L=()=>{const[e,t]=(0,r.useReducer)(f,h),{tableData:a,halted:l,timer:n,result:c}=e,o=(0,r.useMemo)((()=>({tableData:a,halted:l,dispatch:t})),[a,l]);return(0,r.useEffect)((()=>{let e;return!1===l&&(e=setInterval((()=>{t({type:O})}),1e3)),()=>{clearInterval(e)}}),[l]),r.createElement(N.Provider,{value:o},r.createElement(i,null),r.createElement("div",null,n),r.createElement(E,null),r.createElement("div",null,c))};l.render(r.createElement(L,null),document.querySelector("#root"))}},a={};function r(e){var l=a[e];if(void 0!==l)return l.exports;var n=a[e]={exports:{}};return t[e](n,n.exports,r),n.exports}r.m=t,e=[],r.O=(t,a,l,n)=>{if(!a){var c=1/0;for(E=0;E<e.length;E++){for(var[a,l,n]=e[E],o=!0,u=0;u<a.length;u++)(!1&n||c>=n)&&Object.keys(r.O).every((e=>r.O[e](a[u])))?a.splice(u--,1):(o=!1,n<c&&(c=n));if(o){e.splice(E--,1);var s=l();void 0!==s&&(t=s)}}return t}n=n||0;for(var E=e.length;E>0&&e[E-1][2]>n;E--)e[E]=e[E-1];e[E]=[a,l,n]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={143:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var l,n,[c,o,u]=a,s=0;if(c.some((t=>0!==e[t]))){for(l in o)r.o(o,l)&&(r.m[l]=o[l]);if(u)var E=u(r)}for(t&&t(a);s<c.length;s++)n=c[s],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(E)},a=self.webpackChunkmine_search=self.webpackChunkmine_search||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=r.O(void 0,[935],(()=>r(307)));l=r.O(l)})();